<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ArtisanPortal - Connexion</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <div class="auth-wrapper">
    <div class="auth-card">

      <!-- ============================================
           VIEW 1: LOGIN
           ============================================ -->
      <div id="login-view">
        <div class="text-center mb-6">
          <div class="auth-icon blue">
            <!-- Lock icon (SVG) -->
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="11" x="3" y="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
          </div>
          <h1 class="auth-title">Connexion ArtisanPortal</h1>
          <p class="auth-subtitle">Accédez à votre tableau de bord projet.</p>
        </div>

        <!-- Success message (shown after password reset) -->
        <div id="login-success" class="alert alert-success hidden">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><path d="m9 11 3 3L22 4"/></svg>
          <span id="login-success-text"></span>
        </div>

        <form id="login-form">
          <div class="form-group">
            <label class="form-label">Adresse e-mail</label>
            <input type="email" id="login-email" class="form-input" placeholder="nom@entreprise.com" value="john@artisan.com" required>
          </div>

          <div class="form-group">
            <label class="form-label">Mot de passe</label>
            <input type="password" id="login-password" class="form-input" placeholder="Entrez votre mot de passe" required>
            <div class="forgot-link">
              <button type="button" class="btn-link" onclick="showView('forgot')">Mot de passe oublié ?</button>
            </div>
          </div>

          <div id="login-error" class="alert alert-error hidden"></div>

          <button type="submit" id="login-btn" class="btn btn-primary">Se connecter</button>

          <div class="demo-info">
            <p>Identifiants de démo (Mdp : password123) :</p>
            <p>Artisan : john@artisan.com</p>
            <p>Client : contact@alicecorp.com</p>
            <p>Admin : admin@company.com</p>
          </div>
        </form>
      </div>

      <!-- ============================================
           VIEW 2: FORGOT PASSWORD
           ============================================ -->
      <div id="forgot-view" class="hidden">
        <div class="text-center mb-6">
          <div class="auth-icon amber">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="20" height="16" x="2" y="4" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/></svg>
          </div>
          <h1 class="auth-title">Réinitialiser le mot de passe</h1>
          <p class="auth-subtitle">Entrez votre e-mail pour recevoir un lien.</p>
        </div>

        <form id="forgot-form">
          <div class="form-group">
            <label class="form-label">Adresse e-mail</label>
            <input type="email" id="forgot-email" class="form-input" placeholder="nom@entreprise.com" required>
          </div>

          <div id="forgot-error" class="alert alert-error hidden"></div>

          <button type="submit" id="forgot-btn" class="btn btn-primary">Envoyer le lien</button>

          <button type="button" class="back-to-login" onclick="showView('login')">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m12 19-7-7 7-7"/><path d="M19 12H5"/></svg>
            Retour à la connexion
          </button>
        </form>
      </div>

      <!-- ============================================
           VIEW 3: EMAIL SENT CONFIRMATION
           ============================================ -->
      <div id="reset-sent-view" class="hidden">
        <div class="text-center">
          <div class="auth-icon green">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><path d="m9 11 3 3L22 4"/></svg>
          </div>
          <h1 class="auth-title">Vérifiez votre e-mail</h1>
          <p class="auth-subtitle">Nous avons envoyé un lien de réinitialisation à <strong id="sent-email-display"></strong>.</p>

          <div class="demo-box">
            Pour cette démo, imaginez que vous avez cliqué sur le lien dans votre e-mail.
          </div>

          <button class="btn btn-primary mb-4" onclick="showView('reset-new')">
            [Démo] Simuler le clic sur le lien
          </button>

          <button class="btn-ghost" onclick="showView('login')" style="display: block; margin: 0 auto;">
            Retour à la connexion
          </button>
        </div>
      </div>

      <!-- ============================================
           VIEW 4: SET NEW PASSWORD
           ============================================ -->
      <div id="reset-new-view" class="hidden">
        <div class="text-center mb-6">
          <div class="auth-icon purple">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4"/><path d="m21 2-9.6 9.6"/><circle cx="7.5" cy="15.5" r="5.5"/></svg>
          </div>
          <h1 class="auth-title">Nouveau mot de passe</h1>
          <p class="auth-subtitle">Créez un nouveau mot de passe sécurisé.</p>
        </div>

        <form id="reset-form">
          <div class="form-group">
            <label class="form-label">Nouveau mot de passe</label>
            <input type="password" id="new-password" class="form-input" placeholder="Nouveau mot de passe" required>
          </div>

          <div class="form-group">
            <label class="form-label">Confirmer le mot de passe</label>
            <input type="password" id="confirm-password" class="form-input" placeholder="Confirmer le mot de passe" required>
          </div>

          <div id="reset-error" class="alert alert-error hidden"></div>

          <button type="submit" id="reset-btn" class="btn btn-primary">Définir le nouveau mot de passe</button>
        </form>
      </div>

    </div>
  </div>

  <script src="/js/auth.js"></script>
</body>
</html>
